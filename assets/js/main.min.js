(function(a){window.Shareaholic=window.Shareaholic||{};window.shareaholic_debug=!0;Shareaholic.bind_button_clicks=function(b,c){c&&a(b.selector).off("click.app_settings");a(b.selector).off("click.app_settings").on("click.app_settings",function(c){button=this;c.preventDefault();url=b.url(this);$frame=a("<iframe>",{src:url}).appendTo("#iframe_container");b.callback&&b.callback(this);a("#editing_modal").reveal({topPosition:50,close:function(){b.close&&b.close(button);$frame.remove()}})})};Shareaholic.click_objects=
{app_settings:{selector:"#app_settings button",url:function(b){id=a(b).data("location_id");app=a(b).data("app");url=first_part_of_url+a(b).data("href")+"?embedded=true&verification_key="+verification_key;return url=url.replace(/{{id}}/,id)},callback:function(b){id=a(b).data("location_id");app=a(b).data("app");text="You can also use this shortcode to place this {{app}} App anywhere.";html="<div id='shortcode_container'>         <span id='shortcode_description'></span>         <textarea id='shortcode' name='widget_div' onclick='select();' readonly='readonly'></textarea>       </div>";
a(html).appendTo(".reveal-modal");a("#shortcode_description").text(text.replace(/{{app}}/,Shareaholic.titlecase(app)));a("#shortcode").text('[shareaholic app="'+app+'" id="'+id+'"]')},close:function(b){a("#shortcode_container").remove()}},general_settings:{selector:"#general_settings",url:function(a){return first_part_of_url+"edit?embedded=true&verification_key="+verification_key},callback:function(b){a("#iframe_container").css("height","100%");a("#iframe_container iframe").css("height","100%")}}};
Shareaholic.Utils.PostMessage.receive("settings_saved",{success:function(b){a('input[type="submit"]').click()},failure:function(a){console.log(a)}});Shareaholic.titlecase=function(a){return a.charAt(0).toUpperCase()+a.replace(/_[a-z]/g,function(a){return a.toUpperCase().replace(/_/," ")}).slice(1)};Shareaholic.disable_buttons=function(){a("#app_settings button").each(function(){a(this).data("location_id")?a(this).removeAttr("disabled"):a(this).attr("disabled","disabled")})};Shareaholic.create_new_location=
function(b){button=a(b).siblings("button");app=button.data("app");location_id=button.data("location_id");location_id||(data={},data["configuration_"+app+"_location"]={name:/.*\[(.*)\]/.exec(a(b).attr("name"))[1]},a.ajax({url:first_part_of_url+app+"/locations.json",type:"POST",data:data,success:function(a,b,d){a.action="shareaholic_add_location";button.data("location_id",a.location.id);Shareaholic.disable_buttons();Shareaholic.submit_to_admin(a,function(a){console.log(a)})},failure:function(a){console.log(a)},
xhrFields:{withCredentials:!0}}))};Shareaholic.submit_to_admin=function(b,c){a.ajax({url:ajaxurl,type:"POST",data:b,success:function(a){try{a=JSON.parse(a)}catch(b){a={}}c(a)},failure:function(a){try{a=JSON.parse(a)}catch(b){a={}}c(a)}})};a(document).ready(function(){Shareaholic.disable_buttons();Shareaholic.bind_button_clicks(Shareaholic.click_objects.app_settings);Shareaholic.bind_button_clicks(Shareaholic.click_objects.general_settings);Shareaholic.click_objects.unverified_general_settings&&Shareaholic.bind_button_clicks(Shareaholic.click_objects.unverified_general_settings,
!0);a("#terms_of_service_modal").reveal({closeonbackgroundclick:!1,closeonescape:!1,topPosition:100});a("#failed_to_create_api_key").reveal({closeonbackgroundclick:!1,closeonescape:!1});a("#get_started").on("click",function(a){a.preventDefault();data={action:"shareaholic_accept_terms_of_service"};Shareaholic.submit_to_admin(data,function(){location.reload()})});a("form input[type=checkbox]").on("click",function(){a(this).is(":checked")&&!a(this).data("location_id")&&Shareaholic.create_new_location(this)})})})(sQuery);
